      <div id="videoGallery" class="video-gallery">
        <h3>Videá</h3>
        <div id="videos" class="videos-grid">Načítavam...</div>
      </div>

      <style>
        .video-gallery { margin: 1.5rem 0; }
        .videos-grid { display: grid; gap: 12px; grid-template-columns: repeat(auto-fit,minmax(200px,1fr)); }
        .video-card { position: relative; padding-top: 56.25%; background:#000; overflow:hidden; border-radius:8px; }
        .video-card iframe { position:absolute; top:0; left:0; width:100%; height:100%; border:0; }
        .video-placeholder { padding: 1rem; color:#666; }
      </style>

      <script>
      (async function(){
        // CONFIG - replace with your API key. Optionally supply CHANNEL_ID. If CHANNEL_ID left empty, CHANNEL_HANDLE will be tried.
        const API_KEY = 'YOUR_YOUTUBE_API_KEY';
        const CHANNEL_ID = ''; // e.g. 'UCxxxxxxxx...' - preferred if you have it
        const CHANNEL_HANDLE = '@GREENSTAR_SK'; // channel handle or username to resolve if CHANNEL_ID is empty
        const MAX_VIDEOS = 12;

        if (!API_KEY) {
          document.getElementById('videos').textContent = 'YouTube API key required. Set API_KEY in script.';
          return;
        }

        const isMobile = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent) || window.matchMedia && window.matchMedia('(pointer:coarse)').matches;

        async function fetchJson(url){ const r = await fetch(url); if(!r.ok) throw new Error(await r.text()); return r.json(); }

        async function resolveChannelId(){
          if (CHANNEL_ID) return CHANNEL_ID;
          // Try resolving handle/username via search for channel
          const q = encodeURIComponent(CHANNEL_HANDLE.replace(/^@/,''));
          const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=channel&q=${q}&maxResults=1&key=${API_KEY}`;
          const data = await fetchJson(url);
          if (data.items && data.items[0] && data.items[0].snippet && data.items[0].snippet.channelId) {
            return data.items[0].snippet.channelId;
          }
          throw new Error('Unable to resolve channel id. Provide CHANNEL_ID or a valid handle and API key.');
        }

        function isoDurationToSeconds(iso){
          // simple parser for PT#H#M#S
          const m = iso.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);
          if (!m) return 0;
          const h = parseInt(m[1]||0,10), min = parseInt(m[2]||0,10), s = parseInt(m[3]||0,10);
          return h*3600 + min*60 + s;
        }

        try {
          const channelId = await resolveChannelId();

          // get uploads playlist id
          const chUrl = `https://www.googleapis.com/youtube/v3/channels?part=contentDetails&id=${channelId}&key=${API_KEY}`;
          const chData = await fetchJson(chUrl);
          const uploadsId = chData.items?.[0]?.contentDetails?.relatedPlaylists?.uploads;
          if (!uploadsId) throw new Error('Uploads playlist not found.');

          // get playlist items (videoIds)
          const plUrl = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${uploadsId}&maxResults=${MAX_VIDEOS}&key=${API_KEY}`;
          const plData = await fetchJson(plUrl);
          const videoIds = plData.items?.map(i => i.snippet.resourceId.videoId).filter(Boolean);
          if (!videoIds || videoIds.length === 0) {
            document.getElementById('videos').textContent = 'Žiadne videá.';
            return;
          }

          // fetch video details (snippet + contentDetails to get duration)
          const vidsUrl = `https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails&id=${videoIds.join(',')}&key=${API_KEY}`;
          const vidsData = await fetchJson(vidsUrl);
          let videos = vidsData.items.map(v => {
            return {
              id: v.id,
              title: v.snippet.title,
              thumbnails: v.snippet.thumbnails,
              durationSec: isoDurationToSeconds(v.contentDetails?.duration || 'PT0S')
            };
          });

          // If mobile -> show shorts (duration <= 60s). If none, fall back to latest videos.
          if (isMobile) {
            const shorts = videos.filter(v => v.durationSec > 0 && v.durationSec <= 60);
            if (shorts.length) videos = shorts;
            // otherwise keep videos as-is (no strict failure)
          }

          const container = document.getElementById('videos');
          container.innerHTML = '';
          videos.forEach(v => {
            const card = document.createElement('div');
            card.className = 'video-card';
            const iframe = document.createElement('iframe');
            // Use autoplay=0; modestbranding=1; rel=0 for nicer embedding. For Shorts, iframe works too.
            iframe.src = `https://www.youtube.com/embed/${v.id}?rel=0&modestbranding=1`;
            iframe.title = v.title;
            iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
            iframe.allowFullscreen = true;
            card.appendChild(iframe);
            container.appendChild(card);
          });

        } catch(err) {
          document.getElementById('videos').innerHTML = '<div class="video-placeholder">Chyba pri načítaní videí: ' + (err.message || err) + '</div>';
          console.error(err);
        }
      })();
      </script>